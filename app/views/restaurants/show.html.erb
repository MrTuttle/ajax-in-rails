<div class="container" data-controller='insert-in-list'>
  <h1><%= @restaurant.name %> <small><%= @restaurant.address %></small></h1>

  <h2><%= pluralize @restaurant.reviews.size, "review" %></h2>

  <div data-insert-in-list-target='items'>
    <% if @restaurant.reviews.blank? %>
      Be the first to leave a review for <%= @restaurant.name %>
    <% else %>
      <% @restaurant.reviews.each do |review| %>

      <%# a rendre en partial pour le json builder %>
        <%#= review.content %>

        <%# render 'partial', variable locale %>
        <%= render 'review', review: review %>

      <% end %>
    <% end %>
  </div>

<%# formulaire factoriser partial en convertissant les variables d'instance en variables locales %>
<%#= dans une partial, il n’y a pas de variables d’instances (@restaurant), seulement des variables locales (restaurant) %>

  <%#= simple_form_for([@restaurant, @review],
  data: {insert_in_list_target: 'form', action: 'submit->insert-in-list#send'}) do |f| %>
    <%#= f.input :content %>
    <%#= f.button :submit %>
  <%# end %>

<%#= render partial 'adresse', variables locales %>
  <%= render 'reviews/form', restaurant: @restaurant, review: @review %>

  <%= link_to "Back to all restaurants", restaurants_path %>
</div>
